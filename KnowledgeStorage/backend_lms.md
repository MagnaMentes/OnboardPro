# LMS модели (Learning Management System)

Модули LMS (Learning Management System) добавляют возможность создавать обучающие материалы и тесты в рамках шагов онбординга.

## Архитектура моделей LMS

```
OnboardingStep
    │
    ├── LMSModule (Обучающий модуль)
    │       └── Контент (видео, текст, файл)
    │
    └── LMSTest (Тест)
           └── LMSQuestion (Вопрос)
                 └── LMSOption (Вариант ответа)
```

## Модели

### LMSModule

Модель обучающего модуля в LMS.

| Поле         | Тип                  | Описание                                                      |
| ------------ | -------------------- | ------------------------------------------------------------- |
| title        | CharField            | Заголовок модуля                                              |
| description  | TextField            | Описание модуля (опционально)                                 |
| content_type | CharField            | Тип контента (video, text, file)                              |
| content      | TextField            | Содержимое (URL видео, текстовое содержимое или путь к файлу) |
| order        | PositiveIntegerField | Порядковый номер для сортировки                               |
| step         | ForeignKey           | Связь с шагом онбординга                                      |
| created_at   | DateTimeField        | Дата создания                                                 |
| updated_at   | DateTimeField        | Дата обновления                                               |

### LMSTest

Модель теста в LMS.

| Поле        | Тип           | Описание                     |
| ----------- | ------------- | ---------------------------- |
| title       | CharField     | Название теста               |
| description | TextField     | Описание теста (опционально) |
| step        | ForeignKey    | Связь с шагом онбординга     |
| created_at  | DateTimeField | Дата создания                |
| updated_at  | DateTimeField | Дата обновления              |

### LMSQuestion

Модель вопроса в тесте LMS.

| Поле  | Тип                  | Описание                        |
| ----- | -------------------- | ------------------------------- |
| test  | ForeignKey           | Связь с тестом                  |
| text  | TextField            | Текст вопроса                   |
| order | PositiveIntegerField | Порядковый номер для сортировки |

### LMSOption

Модель варианта ответа на вопрос теста LMS.

| Поле       | Тип                  | Описание                        |
| ---------- | -------------------- | ------------------------------- |
| question   | ForeignKey           | Связь с вопросом                |
| text       | CharField            | Текст варианта ответа           |
| is_correct | BooleanField         | Флаг правильного ответа         |
| order      | PositiveIntegerField | Порядковый номер для сортировки |

### LMSUserAnswer

Модель ответа пользователя на вопрос теста LMS.

| Поле            | Тип           | Описание                           |
| --------------- | ------------- | ---------------------------------- |
| user            | ForeignKey    | Связь с пользователем              |
| question        | ForeignKey    | Связь с вопросом                   |
| selected_option | ForeignKey    | Связь с выбранным вариантом ответа |
| answered_at     | DateTimeField | Дата ответа                        |

### LMSUserTestResult

Модель результата прохождения теста пользователем.

| Поле         | Тип                  | Описание                                |
| ------------ | -------------------- | --------------------------------------- |
| user         | ForeignKey           | Связь с пользователем                   |
| test         | ForeignKey           | Связь с тестом                          |
| is_passed    | BooleanField         | Флаг успешного прохождения              |
| score        | PositiveIntegerField | Количество набранных баллов             |
| max_score    | PositiveIntegerField | Максимально возможное количество баллов |
| completed_at | DateTimeField        | Дата прохождения                        |

## Взаимодействие с шагами онбординга

1. Шаг онбординга с типом "training" может содержать:

   - Один или несколько обучающих модулей (LMSModule)
   - Один тест (LMSTest) для проверки знаний

2. Прохождение теста:

   - Пользователь может пройти тест только один раз
   - Для успешного прохождения теста необходимо ответить правильно на все вопросы
   - После успешного прохождения теста статус шага автоматически становится "done"

3. Защита от повторного прохождения:
   - Система сохраняет все ответы пользователя
   - Блокирует повторную отправку ответов на уже пройденный тест
